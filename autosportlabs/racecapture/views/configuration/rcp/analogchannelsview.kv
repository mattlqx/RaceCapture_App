#
# Race Capture App
#
# Copyright (C) 2014-2016 Autosport Labs
#
# This file is part of the Race Capture App
#
# This is free software: you can redistribute it and/or modify it
# under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# This software is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
#
# See the GNU General Public License for more details. You should
# have received a copy of the GNU General Public License along with
# this code. If not, see <http://www.gnu.org/licenses/>.

#:kivy 1.9.1

<AnalogChannelsView>:

<AnalogChannel>:
	orientation: 'horizontal'
	BoxLayout:
        orientation: 'vertical'
        padding: (dp(10), dp(10))
        spacing: dp(5)
        ChannelNameSelectorView:
            id: chan_id
            channel_type: 1
            size_hint: (1.0,0.15)
        SampleRateSelectorView:
            id: sr
            size_hint: (1.0,0.15)
        HSeparatorMinor:
            text: 'Mode'
	    GridLayout:
	        size_hint: (1.0, 0.4)
	        cols: 3
	        FieldLabel:
        		text: 'Raw (0-5v)'
        		font_size: sp(17)
        		halign: 'right'
	        CheckBox:
	        	group: 'scalingType'
                id: smRaw
                on_active: root.on_scaling_type_raw(*args)
            Label:
	        FieldLabel:
	        	text: 'Linear'
	        	font_size: sp(17)
	        	halign: 'right'
	        CheckBox:
	        	group: 'scalingType'
                id: smLinear
                on_active: root.on_scaling_type_linear(*args)
			FloatValueField:
				id: linearscaling
				on_text: root.on_linear_map_value(*args)	
	        FieldLabel:
	        	text: 'Mapped'
	        	font_size: sp(17)
	        	halign: 'right'
	        CheckBox:
	        	group: 'scalingType'
                id: smMapped
                on_active: root.on_scaling_type_map(*args)
			Label:
		BoxLayout:
		    size_hint_y: None
		    height: dp(30)
            orientation: 'horizontal'
            BoxLayout:
            LabelIconButton:
                size_hint_x: None
                width: dp(120)
                id: load_preset
                title: 'Presets'
                icon_size: self.height * 0.7
                title_font_size: self.height * 0.5
                icon: u'\uf150'
                on_press: root.load_preset_view()
			               
    VSeparator:
    BoxLayout:
        padding: (dp(10), dp(10))
        orientation: 'vertical'
        #padding: [2,0,0,0]
        AnalogScalingMapEditor:
            id: map_editor
        
<AnalogScaler>:
    id: graph
    xlabel: 'Volts'
    ylabel: 'Scaled'
    x_ticks_minor: 1
    x_ticks_major: 1
    y_grid_label: True
    x_grid_label: True
    padding: 5
    x_grid: True
    y_grid: True
    xmin: 0
    xmax: 5

<AnalogScalingMapEditor>:
    orientation: 'vertical'
    BoxLayout:
        size_hint: (1.0, 0.6)
		id: graphcontainer    	
    	orientation: 'vertical'
    GridLayout:
        cols: 6
        size_hint: (1.0, 0.4)
        Label:
            text: ''
        Label:
            text: '1'
        Label:
            text: '2'
        Label:
            text: '3'
        Label:
            text: '4'
        Label:
            text: '5'
        Label:
            text: 'Volts'
        FloatValueField:
            rcid: 'v_0'
            text: ''
            on_text_validate: root.on_volts(0, *args)
        FloatValueField:
            rcid: 'v_1'
            text: ''
            on_text_validate: root.on_volts(1, *args)
        FloatValueField:
            rcid: 'v_2'
            text: ''
            on_text_validate: root.on_volts(2, *args)
        FloatValueField:
            rcid: 'v_3'
            text: ''
            on_text_validate: root.on_volts(3, *args)
        FloatValueField:
            rcid: 'v_4'
            text: ''
            on_text_validate: root.on_volts(4, *args)
        Label:
            text: 'Scaled'
        FloatValueField:
            rcid: 's_0'
            text: ''
            on_text: root.on_scaled(0, *args)
        FloatValueField:
            rcid: 's_1'
            text: ''
            on_text: root.on_scaled(1, *args)
        FloatValueField:
            rcid: 's_2'
            text: ''
            on_text: root.on_scaled(2, *args)
        FloatValueField:
            rcid: 's_3'
            text: ''
            on_text: root.on_scaled(3, *args)
        FloatValueField:
            rcid: 's_4'
            text: ''
            on_text: root.on_scaled(4, *args)
